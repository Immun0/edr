---
title: "Chapter 4.1"
author: "rwr"
output: html_document
---

```{r load_tidyverse_rwr}
library(tidyverse)
library(rwr)
```


```{r winniweather, paged.print=FALSE}
winniweather
```


```{r gather, paged.print=FALSE}
winniweather <- 
  winniweather %>%
  gather(key = hour, value = temp, starts_with("temp"))

winniweather
```


```{r mutate_case_when, paged.print=FALSE}
winniweather <- 
  winniweather %>%
  mutate(hour = case_when(
    hour == "temp00_00" ~ 0L,
    hour == "temp06_00" ~ 6L,
    hour == "temp12_00" ~ 12L,
    hour == "temp18_00" ~ 18L))

winniweather
```


```{r separate, paged.print=FALSE}
winniweather <- 
  winniweather %>%
  separate(yearmonth, c("year", "month"), sep = "-", convert = TRUE)

winniweather
```


```{r weather_arrange, paged.print=FALSE}
winniweather <- 
  winniweather %>%
  arrange(year, month, day)

winniweather
```


```{r iso_date, paged.print=FALSE}
winniweather_iso <- 
  winniweather %>%
  mutate(iso_date = ISOdate(year, month, day, hour))

winniweather_iso
```


```{r weather_ggplot}
ggplot(data = winniweather_iso) +
  geom_point(mapping = aes(x = iso_date, y = temp))
```
